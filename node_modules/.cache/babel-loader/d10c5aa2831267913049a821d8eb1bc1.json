{"ast":null,"code":"import _classCallCheck from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import _ from\"lodash\";import moment from\"moment\";import{Button,Container,Table,Dropdown,Icon}from\"semantic-ui-react\";import SalesModal from\"./SalesModal\";import Pagination from\"../Common/Pagination\";var Sales=/*#__PURE__*/function(_Component){_inherits(Sales,_Component);var _super=_createSuper(Sales);function Sales(props){var _this;_classCallCheck(this,Sales);_this=_super.call(this,props);_this.fetchSales=function(){axios.get(\"/Sales/GetSales\").then(function(_ref){var data=_ref.data;_this.setState({sales:data,totalRows:data});_this.fetchRecordsPerPage(_this.state.curruntPage,_this.state.rowsPerPage);}).catch(function(err){console.log(err);});};_this.fetchCustomers=function(){axios.get(\"/Customers/GetCustomer\").then(function(_ref2){var data=_ref2.data;_this.setState({customers:data});}).catch(function(err){console.log(err);});};_this.fetchProducts=function(){axios.get(\"/Products/GetProduct\").then(function(_ref3){var data=_ref3.data;_this.setState({products:data});}).catch(function(err){console.log(err);});};_this.fetchStores=function(){axios.get(\"/Stores/GetStore\").then(function(_ref4){var data=_ref4.data;_this.setState({stores:data});}).catch(function(err){console.log(err);});};_this.toggleSalesModal=function(value,button,sale){_this.setState({open:value,button:button,sale:sale});};_this.handleDropdown=function(event,data){_this.setState({curruntPage:1,rowsPerPage:data.value});_this.fetchSales();};_this.fetchRecordsPerPage=function(curruntPage,rowsPerPage){var indexOfLastRow=curruntPage*rowsPerPage;var indexOfFirstRow=indexOfLastRow-rowsPerPage;var salesPerPage=_this.state.sales.slice(indexOfFirstRow,indexOfLastRow);_this.setState({sales:salesPerPage});};_this.paginate=function(pageNumber){_this.setState({curruntPage:pageNumber});_this.fetchSales();};_this.handleSort=function(clickedColumn){var _this$state=_this.state,column=_this$state.column,sales=_this$state.sales,direction=_this$state.direction;if(column!==clickedColumn){_this.setState({column:clickedColumn,sales:_.sortBy(sales,[clickedColumn]),direction:\"ascending\"});return;}_this.setState({sales:sales.reverse(),direction:direction===\"ascending\"?\"descending\":\"ascending\"});};_this.state={customers:[],products:[],stores:[],sales:[],sale:{},open:false,button:\"\",rowsPerPage:10,totalRows:0,curruntPage:1,column:null,direction:null,// value: 0,\noptions:[{key:10,text:\"10\",value:10},{key:20,text:\"20\",value:20},{key:30,text:\"30\",value:30}],selected:10};return _this;}_createClass(Sales,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchSales();this.fetchCustomers();this.fetchProducts();this.fetchStores();}},{key:\"render\",value:// End Column Sorting\nfunction render(){var _this2=this;var _this$state2=this.state,open=_this$state2.open,button=_this$state2.button,sale=_this$state2.sale,sales=_this$state2.sales,column=_this$state2.column,direction=_this$state2.direction,customers=_this$state2.customers,products=_this$state2.products,stores=_this$state2.stores;return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(SalesModal,{open:open,button:button,sales:sales,sale:sale,fetchSales:this.fetchSales,toggleSalesModal:this.toggleSalesModal,customers:customers,products:products,stores:stores}),/*#__PURE__*/React.createElement(Button,{color:\"blue\",onClick:function onClick(){return _this2.toggleSalesModal(true,\"Add\",null);}},\"New Sales\"),/*#__PURE__*/React.createElement(Table,{sortable:true,celled:true,striped:true,fixed:true},/*#__PURE__*/React.createElement(Table.Header,null,/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.HeaderCell,{sorted:column===\"customer\"?direction:null,onClick:function onClick(){return _this2.handleSort(\"customer\");}},\"Customer\"),/*#__PURE__*/React.createElement(Table.HeaderCell,{sorted:column===\"product\"?direction:null,onClick:function onClick(){return _this2.handleSort(\"product\");}},\"Product\"),/*#__PURE__*/React.createElement(Table.HeaderCell,{sorted:column===\"store\"?direction:null,onClick:function onClick(){return _this2.handleSort(\"store\");}},\"Store\"),/*#__PURE__*/React.createElement(Table.HeaderCell,{sorted:column===\"dateSold\"?direction:null,onClick:function onClick(){return _this2.handleSort(\"dateSold\");}},\"Date Sold\"),/*#__PURE__*/React.createElement(Table.HeaderCell,null,\"Action\"),/*#__PURE__*/React.createElement(Table.HeaderCell,null,\"Action\"))),/*#__PURE__*/React.createElement(Table.Body,null,this.state.sales.map(function(sale){return/*#__PURE__*/React.createElement(Table.Row,{key:sale.id},/*#__PURE__*/React.createElement(Table.Cell,null,sale.customer.name),/*#__PURE__*/React.createElement(Table.Cell,null,sale.product.name),/*#__PURE__*/React.createElement(Table.Cell,null,sale.store.name),/*#__PURE__*/React.createElement(Table.Cell,null,moment(sale.dateSold).format(\"DD MMM, YYYY\")),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.toggleSalesModal(true,\"Edit\",sale);},color:\"yellow\",icon:true,labelPosition:\"left\"},/*#__PURE__*/React.createElement(Icon,{name:\"edit\"}),\"EDIT\")),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this2.toggleSalesModal(true,\"\",sale);},color:\"red\",icon:true,labelPosition:\"left\"},/*#__PURE__*/React.createElement(Icon,{name:\"trash\"}),\"DELETE\")));}))),/*#__PURE__*/React.createElement(Pagination,{totalRows:this.state.totalRows.length,rowsPerPage:this.state.rowsPerPage,paginate:this.paginate}),/*#__PURE__*/React.createElement(Dropdown,{compact:true,selection:true,defaultValue:this.state.selected,options:this.state.options,onChange:this.handleDropdown}));}}]);return Sales;}(Component);export default Sales;","map":{"version":3,"sources":["G:/Talent/Talent/Talent/ClientApp/src/components/Sales/Sales.jsx"],"names":["React","Component","axios","_","moment","Button","Container","Table","Dropdown","Icon","SalesModal","Pagination","Sales","props","fetchSales","get","then","data","setState","sales","totalRows","fetchRecordsPerPage","state","curruntPage","rowsPerPage","catch","err","console","log","fetchCustomers","customers","fetchProducts","products","fetchStores","stores","toggleSalesModal","value","button","sale","open","handleDropdown","event","indexOfLastRow","indexOfFirstRow","salesPerPage","slice","paginate","pageNumber","handleSort","clickedColumn","column","direction","sortBy","reverse","options","key","text","selected","map","id","customer","name","product","store","dateSold","format","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport _ from \"lodash\";\r\nimport moment from \"moment\";\r\nimport { Button, Container, Table, Dropdown, Icon } from \"semantic-ui-react\";\r\nimport SalesModal from \"./SalesModal\";\r\nimport Pagination from \"../Common/Pagination\";\r\n\r\nclass Sales extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      customers: [],\r\n      products: [],\r\n      stores: [],\r\n\r\n      sales: [],\r\n      sale: {},\r\n      open: false,\r\n      button: \"\",\r\n      rowsPerPage: 10,\r\n      totalRows: 0,\r\n      curruntPage: 1,\r\n      column: null,\r\n      direction: null,\r\n      // value: 0,\r\n\r\n      options: [\r\n        { key: 10, text: \"10\", value: 10 },\r\n        { key: 20, text: \"20\", value: 20 },\r\n        { key: 30, text: \"30\", value: 30 },\r\n      ],\r\n      selected: 10,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchSales();\r\n    this.fetchCustomers();\r\n    this.fetchProducts();\r\n    this.fetchStores();\r\n  }\r\n\r\n  fetchSales = () => {\r\n    axios\r\n      .get(\"/Sales/GetSales\")\r\n      .then(({ data }) => {\r\n        this.setState({\r\n          sales: data,\r\n          totalRows: data,\r\n        });\r\n        this.fetchRecordsPerPage(\r\n          this.state.curruntPage,\r\n          this.state.rowsPerPage\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  // Getting all Customers, Products, Stores\r\n  fetchCustomers = () => {\r\n    axios\r\n      .get(\"/Customers/GetCustomer\")\r\n      .then(({ data }) => {\r\n        this.setState({\r\n          customers: data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  fetchProducts = () => {\r\n    axios\r\n      .get(\"/Products/GetProduct\")\r\n      .then(({ data }) => {\r\n        this.setState({\r\n          products: data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  fetchStores = () => {\r\n    axios\r\n      .get(\"/Stores/GetStore\")\r\n      .then(({ data }) => {\r\n        this.setState({\r\n          stores: data,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  // End Getting all Customers, Products, Stores\r\n\r\n  toggleSalesModal = (value, button, sale) => {\r\n    this.setState({\r\n      open: value,\r\n      button: button,\r\n      sale: sale,\r\n    });\r\n  };\r\n\r\n  handleDropdown = (event, data) => {\r\n    this.setState({\r\n      curruntPage: 1,\r\n      rowsPerPage: data.value,\r\n    });\r\n    this.fetchSales();\r\n  };\r\n\r\n  // Records per the page\r\n  fetchRecordsPerPage = (curruntPage, rowsPerPage) => {\r\n    const indexOfLastRow = curruntPage * rowsPerPage;\r\n    const indexOfFirstRow = indexOfLastRow - rowsPerPage;\r\n    const salesPerPage = this.state.sales.slice(\r\n      indexOfFirstRow,\r\n      indexOfLastRow\r\n    );\r\n    this.setState({ sales: salesPerPage });\r\n  };\r\n\r\n  paginate = (pageNumber) => {\r\n    this.setState({ curruntPage: pageNumber });\r\n    this.fetchSales();\r\n  };\r\n\r\n  // Column Sorting\r\n  handleSort = (clickedColumn) => {\r\n    const { column, sales, direction } = this.state;\r\n\r\n    if (column !== clickedColumn) {\r\n      this.setState({\r\n        column: clickedColumn,\r\n        sales: _.sortBy(sales, [clickedColumn]),\r\n        direction: \"ascending\",\r\n      });\r\n\r\n      return;\r\n    }\r\n    this.setState({\r\n      sales: sales.reverse(),\r\n      direction: direction === \"ascending\" ? \"descending\" : \"ascending\",\r\n    });\r\n  };\r\n  // End Column Sorting\r\n\r\n  render() {\r\n    const {\r\n      open,\r\n      button,\r\n      sale,\r\n      sales,\r\n      column,\r\n      direction,\r\n      customers,\r\n      products,\r\n      stores,\r\n    } = this.state;\r\n\r\n    return (\r\n      <Container>\r\n        <SalesModal\r\n          open={open}\r\n          button={button}\r\n          sales={sales}\r\n          sale={sale}\r\n          fetchSales={this.fetchSales}\r\n          toggleSalesModal={this.toggleSalesModal}\r\n          customers={customers}\r\n          products={products}\r\n          stores={stores}\r\n        />\r\n        <Button\r\n          color=\"blue\"\r\n          onClick={() => this.toggleSalesModal(true, \"Add\", null)}\r\n        >\r\n          New Sales\r\n        </Button>\r\n        {/* Table */}\r\n        <Table sortable celled striped fixed>\r\n          <Table.Header>\r\n            <Table.Row>\r\n              <Table.HeaderCell\r\n                sorted={column === \"customer\" ? direction : null}\r\n                onClick={() => this.handleSort(\"customer\")}\r\n              >\r\n                Customer\r\n              </Table.HeaderCell>\r\n              <Table.HeaderCell\r\n                sorted={column === \"product\" ? direction : null}\r\n                onClick={() => this.handleSort(\"product\")}\r\n              >\r\n                Product\r\n              </Table.HeaderCell>\r\n              <Table.HeaderCell\r\n                sorted={column === \"store\" ? direction : null}\r\n                onClick={() => this.handleSort(\"store\")}\r\n              >\r\n                Store\r\n              </Table.HeaderCell>\r\n              <Table.HeaderCell\r\n                sorted={column === \"dateSold\" ? direction : null}\r\n                onClick={() => this.handleSort(\"dateSold\")}\r\n              >\r\n                Date Sold\r\n              </Table.HeaderCell>\r\n              <Table.HeaderCell>Action</Table.HeaderCell>\r\n              <Table.HeaderCell>Action</Table.HeaderCell>\r\n            </Table.Row>\r\n          </Table.Header>\r\n\r\n          <Table.Body>\r\n            {this.state.sales.map((sale) => (\r\n              <Table.Row key={sale.id}>\r\n                <Table.Cell>{sale.customer.name}</Table.Cell>\r\n                <Table.Cell>{sale.product.name}</Table.Cell>\r\n                <Table.Cell>{sale.store.name}</Table.Cell>\r\n                <Table.Cell>\r\n                  {moment(sale.dateSold).format(\"DD MMM, YYYY\")}\r\n                </Table.Cell>\r\n                <Table.Cell>\r\n                  <Button\r\n                    onClick={() => this.toggleSalesModal(true, \"Edit\", sale)}\r\n                    color=\"yellow\"\r\n                    icon\r\n                    labelPosition=\"left\"\r\n                  >\r\n                    <Icon name=\"edit\" />\r\n                    EDIT\r\n                  </Button>\r\n                </Table.Cell>\r\n                <Table.Cell>\r\n                  <Button\r\n                    onClick={() => this.toggleSalesModal(true, \"\", sale)}\r\n                    color=\"red\"\r\n                    icon\r\n                    labelPosition=\"left\"\r\n                  >\r\n                    <Icon name=\"trash\" />\r\n                    DELETE\r\n                  </Button>\r\n                </Table.Cell>\r\n              </Table.Row>\r\n            ))}\r\n          </Table.Body>\r\n        </Table>\r\n        {/* Pagination */}\r\n        <Pagination\r\n          totalRows={this.state.totalRows.length}\r\n          rowsPerPage={this.state.rowsPerPage}\r\n          paginate={this.paginate}\r\n        />\r\n        {/* drpdown selection */}\r\n        <Dropdown\r\n          compact\r\n          selection\r\n          defaultValue={this.state.selected}\r\n          options={this.state.options}\r\n          onChange={this.handleDropdown}\r\n        />\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Sales;\r\n"]},"metadata":{},"sourceType":"module"}