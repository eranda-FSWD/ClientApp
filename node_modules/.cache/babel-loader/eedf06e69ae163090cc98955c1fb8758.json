{"ast":null,"code":"import _classCallCheck from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"G:\\\\Talent\\\\Talent\\\\Talent\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import moment from\"moment\";import{Button,Modal,Form,Icon,Dropdown}from\"semantic-ui-react\";var SalesModal=/*#__PURE__*/function(_Component){_inherits(SalesModal,_Component);var _super=_createSuper(SalesModal);function SalesModal(props){var _this;_classCallCheck(this,SalesModal);_this=_super.call(this,props);_this.deleteSale=function(id){axios.delete(\"/Sales/DeleteSales/\".concat(id)).then(function(res){_this.props.fetchSales();_this.props.toggleSalesModal(false);}).catch(function(err){console.log(err);});};_this.addSale=function(){var fDate=moment(_this.state.dateSale).format(\"DD MMM, YYYY\");axios.post(\"/Sales/PostSales\",{productId:_this.state.proId,customerId:_this.state.cusId,storeId:_this.state.stId,dateSold:fDate}).then(function(res){//console.log(res.data);\n_this.props.fetchSales();_this.props.toggleSalesModal(false);_this.setState({proId:0,cusId:0,stId:0,dateSale:\"\"});}).catch(function(err){console.log(err);});};_this.editSale=function(id){var _this$state=_this.state,proId=_this$state.proId,cusId=_this$state.cusId,stId=_this$state.stId,dateSale=_this$state.dateSale;var fDate=dateSale===\"\"?dateSale:moment(dateSale).format(\"DD MMM, YYYY\");var saleId=id===undefined?_this.props.sale.id:id;console.log(dateSale);axios.put(\"/Sales/PutSales/\".concat(id),{id:saleId,productId:proId===0?_this.props.sale.product.id:proId,customerId:cusId===0?_this.props.sale.customer.id:cusId,storeId:stId===0?_this.props.sale.store.id:stId,dateSold:fDate===\"\"?_this.props.sale.dateSold:fDate}).then(function(res){_this.props.fetchSales();_this.props.toggleSalesModal(false);_this.setState({proId:0,cusId:0,stId:0,dateSale:\"\"});}).catch(function(err){console.log(err);});};_this.handleCusDropdown=function(event,data){console.log(data.value);_this.setState({cusId:data.value});};_this.handleProDropdown=function(event,data){console.log(data.value);_this.setState({proId:data.value});};_this.handleStoDropdown=function(event,data){console.log(data.value);_this.setState({stId:data.value});};_this.state={customer:{},product:{},store:{},dateSale:\"\",cusId:0,proId:0,stId:0};return _this;}/*   componentDidMount() {\r\n    this.setState({\r\n      cusId: 0,\r\n      proId: 0,\r\n      stId: 0,\r\n    });\r\n  } */_createClass(SalesModal,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,open=_this$props.open,button=_this$props.button,sale=_this$props.sale,toggleSalesModal=_this$props.toggleSalesModal,customers=_this$props.customers,products=_this$props.products,stores=_this$props.stores;if(button===\"Add\"){return/*#__PURE__*/React.createElement(Modal,{centered:true,open:open},/*#__PURE__*/React.createElement(Modal.Header,null,\"Create Sale\"),/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Date sold\"),/*#__PURE__*/React.createElement(\"input\",{placeholder:\"MM/DD/YYYY\",onChange:function onChange(e){return _this2.setState({dateSale:e.target.value});}})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Customer\"),/*#__PURE__*/React.createElement(Dropdown,{placeholder:\"Select Customer\",fluid:true,selection:true,options:customers.map(function(c){return{key:c.id,text:c.name,value:c.id};}),onChange:this.handleCusDropdown})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Product\"),/*#__PURE__*/React.createElement(Dropdown,{placeholder:\"Select Product\",fluid:true,selection:true,options:products.map(function(p){return{key:p.id,text:p.name,value:p.id};}),onChange:this.handleProDropdown})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Store\"),/*#__PURE__*/React.createElement(Dropdown,{placeholder:\"Select Store\",fluid:true,selection:true,options:stores.map(function(s){return{key:s.id,text:s.name,value:s.id};}),onChange:this.handleStoDropdown}))),/*#__PURE__*/React.createElement(Modal.Description,null,/*#__PURE__*/React.createElement(\"p\",null,\"Note: Date format must be like this MM/DD/YYYY\"))),/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{color:\"black\",onClick:function onClick(){return toggleSalesModal(false,\"\",\"\");}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{disabled:this.state.dateSale.length<10||this.state.stId===0||this.state.cusId===0||this.state.proId===0,color:\"green\",labelPosition:\"right\",icon:true,onClick:this.addSale},/*#__PURE__*/React.createElement(Icon,{name:\"checkmark\"}),\"Create\")));}else if(button===\"Edit\"){return/*#__PURE__*/React.createElement(Modal,{centered:true,open:open},/*#__PURE__*/React.createElement(Modal.Header,null,\"Edit Sale\"),/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Date sold\"),/*#__PURE__*/React.createElement(\"input\",{size:\"small\",defaultValue:moment(sale.dateSold).format(\"L\"),onChange:function onChange(e){return _this2.setState({dateSale:e.target.value});}})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Customer\"),/*#__PURE__*/React.createElement(Dropdown,{fluid:true,selection:true,defaultValue:sale.customerId,options:customers.map(function(c){return{key:c.id,text:c.name,value:c.id};}),onChange:this.handleCusDropdown})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Product\"),/*#__PURE__*/React.createElement(Dropdown,{defaultValue:sale.productId,fluid:true,selection:true,options:products.map(function(p){return{key:p.id,text:p.name,value:p.id};}),onChange:this.handleProDropdown})),/*#__PURE__*/React.createElement(Form.Field,null,/*#__PURE__*/React.createElement(\"label\",null,\"Store\"),/*#__PURE__*/React.createElement(Dropdown,{defaultValue:sale.storeId,fluid:true,selection:true,options:stores.map(function(s){return{key:s.id,text:s.name,value:s.id};}),onChange:this.handleStoDropdown})))),/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{color:\"black\",onClick:function onClick(){return toggleSalesModal(false,\"\",\"\");}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{labelPosition:\"right\",color:\"green\",icon:true,onClick:function onClick(){return _this2.editSale(sale.id);}},/*#__PURE__*/React.createElement(Icon,{name:\"checkmark\"}),\"Edit\")));}else return/*#__PURE__*/React.createElement(Modal,{open:open},/*#__PURE__*/React.createElement(Modal.Header,null,\"Delete Sale\"),/*#__PURE__*/React.createElement(Modal.Content,null,\"Are you sure?\"),/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{color:\"black\",onClick:function onClick(){return toggleSalesModal(false,\"\",\"\");}},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{labelPosition:\"right\",icon:true,onClick:function onClick(){return _this2.deleteSale(sale.id);},positive:true},/*#__PURE__*/React.createElement(Icon,{name:\"times\"}),\"Delete\")));}}]);return SalesModal;}(Component);export default SalesModal;","map":{"version":3,"sources":["G:/Talent/Talent/Talent/ClientApp/src/components/Sales/SalesModal.jsx"],"names":["React","Component","axios","moment","Button","Modal","Form","Icon","Dropdown","SalesModal","props","deleteSale","id","delete","then","res","fetchSales","toggleSalesModal","catch","err","console","log","addSale","fDate","state","dateSale","format","post","productId","proId","customerId","cusId","storeId","stId","dateSold","setState","editSale","saleId","undefined","sale","put","product","customer","store","handleCusDropdown","event","data","value","handleProDropdown","handleStoDropdown","open","button","customers","products","stores","e","target","map","c","key","text","name","p","s","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport { Button, Modal, Form, Icon, Dropdown } from \"semantic-ui-react\";\r\n\r\nclass SalesModal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      customer: {},\r\n      product: {},\r\n      store: {},\r\n      dateSale: \"\",\r\n      cusId: 0,\r\n      proId: 0,\r\n      stId: 0,\r\n    };\r\n  }\r\n  /*   componentDidMount() {\r\n    this.setState({\r\n      cusId: 0,\r\n      proId: 0,\r\n      stId: 0,\r\n    });\r\n  } */\r\n\r\n  deleteSale = (id) => {\r\n    axios\r\n      .delete(`/Sales/DeleteSales/${id}`)\r\n      .then((res) => {\r\n        this.props.fetchSales();\r\n        this.props.toggleSalesModal(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  addSale = () => {\r\n    const fDate = moment(this.state.dateSale).format(\"DD MMM, YYYY\");\r\n\r\n    axios\r\n      .post(\"/Sales/PostSales\", {\r\n        productId: this.state.proId,\r\n        customerId: this.state.cusId,\r\n        storeId: this.state.stId,\r\n        dateSold: fDate,\r\n      })\r\n      .then((res) => {\r\n        //console.log(res.data);\r\n        this.props.fetchSales();\r\n        this.props.toggleSalesModal(false);\r\n        this.setState({ proId: 0, cusId: 0, stId: 0, dateSale: \"\" });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  editSale = (id) => {\r\n    const { proId, cusId, stId, dateSale } = this.state;\r\n    const fDate =\r\n      dateSale === \"\" ? dateSale : moment(dateSale).format(\"DD MMM, YYYY\");\r\n    const saleId = id === undefined ? this.props.sale.id : id;\r\n    console.log(dateSale);\r\n    axios\r\n      .put(`/Sales/PutSales/${id}`, {\r\n        id: saleId,\r\n        productId: proId === 0 ? this.props.sale.product.id : proId,\r\n        customerId: cusId === 0 ? this.props.sale.customer.id : cusId,\r\n        storeId: stId === 0 ? this.props.sale.store.id : stId,\r\n        dateSold: fDate === \"\" ? this.props.sale.dateSold : fDate,\r\n      })\r\n      .then((res) => {\r\n        this.props.fetchSales();\r\n        this.props.toggleSalesModal(false);\r\n        this.setState({ proId: 0, cusId: 0, stId: 0, dateSale: \"\" });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  handleCusDropdown = (event, data) => {\r\n    console.log(data.value);\r\n    this.setState({\r\n      cusId: data.value,\r\n    });\r\n  };\r\n\r\n  handleProDropdown = (event, data) => {\r\n    console.log(data.value);\r\n    this.setState({\r\n      proId: data.value,\r\n    });\r\n  };\r\n\r\n  handleStoDropdown = (event, data) => {\r\n    console.log(data.value);\r\n    this.setState({\r\n      stId: data.value,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      open,\r\n      button,\r\n      sale,\r\n      toggleSalesModal,\r\n      customers,\r\n      products,\r\n      stores,\r\n    } = this.props;\r\n\r\n    if (button === \"Add\") {\r\n      return (\r\n        <Modal centered={true} open={open}>\r\n          <Modal.Header>Create Sale</Modal.Header>\r\n          <Modal.Content>\r\n            <Form>\r\n              <Form.Field>\r\n                <label>Date sold</label>\r\n                <input\r\n                  placeholder=\"MM/DD/YYYY\"\r\n                  onChange={(e) => this.setState({ dateSale: e.target.value })}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>Customer</label>\r\n                <Dropdown\r\n                  placeholder=\"Select Customer\"\r\n                  fluid\r\n                  selection\r\n                  options={customers.map((c) => ({\r\n                    key: c.id,\r\n                    text: c.name,\r\n                    value: c.id,\r\n                  }))}\r\n                  onChange={this.handleCusDropdown}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>Product</label>\r\n                <Dropdown\r\n                  placeholder=\"Select Product\"\r\n                  fluid\r\n                  selection\r\n                  options={products.map((p) => ({\r\n                    key: p.id,\r\n                    text: p.name,\r\n                    value: p.id,\r\n                  }))}\r\n                  onChange={this.handleProDropdown}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>Store</label>\r\n                <Dropdown\r\n                  placeholder=\"Select Store\"\r\n                  fluid\r\n                  selection\r\n                  options={stores.map((s) => ({\r\n                    key: s.id,\r\n                    text: s.name,\r\n                    value: s.id,\r\n                  }))}\r\n                  onChange={this.handleStoDropdown}\r\n                />\r\n              </Form.Field>\r\n            </Form>\r\n            <Modal.Description>\r\n              <p>Note: Date format must be like this MM/DD/YYYY</p>\r\n            </Modal.Description>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            <Button\r\n              color=\"black\"\r\n              onClick={() => toggleSalesModal(false, \"\", \"\")}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              disabled={\r\n                this.state.dateSale.length < 10 ||\r\n                this.state.stId === 0 ||\r\n                this.state.cusId === 0 ||\r\n                this.state.proId === 0\r\n              }\r\n              color=\"green\"\r\n              labelPosition=\"right\"\r\n              icon\r\n              onClick={this.addSale}\r\n            >\r\n              <Icon name=\"checkmark\" />\r\n              Create\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n      );\r\n    } else if (button === \"Edit\") {\r\n      return (\r\n        <Modal centered={true} open={open}>\r\n          <Modal.Header>Edit Sale</Modal.Header>\r\n          <Modal.Content>\r\n            <Form>\r\n              <Form.Field>\r\n                <label>Date sold</label>\r\n                <input\r\n                  size=\"small\"\r\n                  defaultValue={moment(sale.dateSold).format(\"L\")}\r\n                  onChange={(e) => this.setState({ dateSale: e.target.value })}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>Customer</label>\r\n                <Dropdown\r\n                  fluid\r\n                  selection\r\n                  defaultValue={sale.customerId}\r\n                  options={customers.map((c) => ({\r\n                    key: c.id,\r\n                    text: c.name,\r\n                    value: c.id,\r\n                  }))}\r\n                  onChange={this.handleCusDropdown}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>Product</label>\r\n                <Dropdown\r\n                  defaultValue={sale.productId}\r\n                  fluid\r\n                  selection\r\n                  options={products.map((p) => ({\r\n                    key: p.id,\r\n                    text: p.name,\r\n                    value: p.id,\r\n                  }))}\r\n                  onChange={this.handleProDropdown}\r\n                />\r\n              </Form.Field>\r\n              <Form.Field>\r\n                <label>Store</label>\r\n                <Dropdown\r\n                  defaultValue={sale.storeId}\r\n                  fluid\r\n                  selection\r\n                  options={stores.map((s) => ({\r\n                    key: s.id,\r\n                    text: s.name,\r\n                    value: s.id,\r\n                  }))}\r\n                  onChange={this.handleStoDropdown}\r\n                />\r\n              </Form.Field>\r\n            </Form>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            <Button\r\n              color=\"black\"\r\n              onClick={() => toggleSalesModal(false, \"\", \"\")}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              labelPosition=\"right\"\r\n              color=\"green\"\r\n              icon\r\n              onClick={() => this.editSale(sale.id)}\r\n            >\r\n              <Icon name=\"checkmark\" />\r\n              Edit\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n      );\r\n    } else\r\n      return (\r\n        <Modal open={open}>\r\n          <Modal.Header>Delete Sale</Modal.Header>\r\n          <Modal.Content>Are you sure?</Modal.Content>\r\n          <Modal.Actions>\r\n            <Button\r\n              color=\"black\"\r\n              onClick={() => toggleSalesModal(false, \"\", \"\")}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              labelPosition=\"right\"\r\n              icon\r\n              onClick={() => this.deleteSale(sale.id)}\r\n              positive\r\n            >\r\n              <Icon name=\"times\" />\r\n              Delete\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n      );\r\n  }\r\n}\r\n\r\nexport default SalesModal;\r\n"]},"metadata":{},"sourceType":"module"}